@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<style>
.donation-btn {
    border-radius: 10px;
    padding: 10px 20px;
    font-size: 16px;
}
.donation-btn.active {
    border: 2px solid gold;
}

.donate-avatar {
    width: 100px;
    height: 100px;
    object-fit: cover; /* 確保圖片填滿區域 */
    border-radius: 10px; /* 可選，讓圖片略帶圓角 */
}
</style>
<!-- Modal -->
<div class="modal fade" id="donateModal" tabindex="-1" aria-labelledby="donateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header border-0">
                <h5 class="modal-title w-100 text-center" id="donateModalLabel">支持你喜愛的創作者</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img src="/image/Wchi.png" alt="大頭貼" class="donate-avatar">
                <p class="mb-4">小額贊助，向「WCHI」表示支持</p>
                <div class="donation-buttons d-flex justify-content-center gap-2">
                    <button class="btn btn-outline-light donation-btn" value="30">
                        <i class="bi bi-music-note d-block"></i> NTD 30
                    </button>
                    <button class="btn btn-outline-light donation-btn" value="90">
                        <i class="bi bi-music-note d-block"></i> NTD 90
                    </button>
                    <button class="btn btn-outline-light donation-btn" value="150">
                        <i class="bi bi-music-note d-block"></i> NTD 150
                    </button>
                </div>

                <!-- 確定按鈕，不要有 .donation-btn -->
                <div class="modal-footer border-0 d-flex justify-content-center">
                    <button type="button" class="btn btn-danger" id="confirmDonate">確定</button>
                </div>
        </div>
    </div>
</div>
<!-- 彈窗 -->
<div id="redirectModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white text-center p-4">
            <p class="mb-0">導向綠界科技 ECPay 中...</p>
        </div>
    </div>
</div>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script>
        console.log("read js");
        $(document).ready(function () {
            let selectedAmount = null; // 存儲選中的金額

            $(".donation-btn").click(function () {
                // 只影響所有 .donation-btn，不影響 #confirmDonate
                $(".donation-btn").removeClass("btn-outline-warning").addClass("btn-outline-light");

                // 設定被選中的按鈕為黃色
                $(this).removeClass("btn-outline-light").addClass("btn-outline-warning");
                console.log("click<3");
                // 記錄選擇的金額
                selectedAmount = $(this).val();
            });

            $("#confirmDonate").click(function () {
                if (!selectedAmount) {
                    alert("請先選擇贊助金額！");
                    return;
                }

                // 顯示導向彈窗
                $("#redirectModal").modal("show");

                // 偽 API 導向
                setTimeout(function () {
                    window.location.href = "https://fake-ecpay.com/payment?amount=" + selectedAmount;
                }, 2000);
            });
        });


    </script>
}