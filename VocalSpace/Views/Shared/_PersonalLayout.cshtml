@model VocalSpace.Models.ViewModel.Personal.PersonalViewModel

@{
    Layout = "_Layout";  // 引用全域的 _Layout.cshtml
    int id = 1;
}

<div class="profile-header">
    @{
        if (Model.UserId == id) { <!-- 預覽封面圖片 -->

            <div class="cover-container">
                <div class="covercover">
                    <img id="coverpreview" alt="封面圖片">
                </div>
                <label class="coverupload-btn">
                    選擇圖片
                    <input type="file" id="coverfileInput" accept="image/*">
                </label>
            </div>
            
        } else 
        {
            <div class="cover"> 
                <div class="coverbutton"> 
                    <button type="button" class="btn btn-danger"><i class="bi bi-plus-lg"></i>追蹤對方</button>
                </div> 
            </div> 
        }
    }
    

            

           
        <div class="pro">
            <div class="profile-info">
                <div class="personal-data">
                    <!-- 預覽頭貼圖片 -->
                     
                    <div class="head-container">
                        <div class="headcover">
                            <img id="headpreview" alt="封面圖片">
                        </div>
                        <label class="headupload-btn">
                            選擇圖片
                            <input type="file" id="headfileInput" accept="image/*">
                        </label>
                    </div>
                    
                    <div class="osinfo">
                        <h2>ilyynlvl</h2>
                        <p>@@4osxm9 ・ 會員</p>
                        <p>於 2025 年 2 月 加入</p>
                    </div>
                </div>
                <div class="stats">
                    <ul b-lmw9bnkxzw="" class="list-inline opacity-75">
                        <li b-lmw9bnkxzw="" class="list-inline-item">
                            <h4 b-lmw9bnkxzw="" class="fs-6"> 追蹤中</h4>
                            <h4 b-lmw9bnkxzw="">0</h4>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div> 
    
    @RenderBody()


<script>

    const list = document.getElementById('myList');
    const items = list.getElementsByTagName('a');

    // 為每個 list 項目加上 click 事件監聽器
    for (let i = 0; i < items.length; i++) {
        items[i].addEventListener('click', function () {
            // 清除所有項目的選取效果
            for (let j = 0; j < items.length; j++) {
                items[j].classList.remove('active');
            }
            // 為被點擊的項目加上選取效果
            this.classList.add('active');
        });
    }

    // 取得所有按鈕
    const buttons = document.querySelectorAll('.btn-outline-secondary.book');

    // 為每個按鈕加上點擊事件
    buttons.forEach(button => {
        button.addEventListener('click', function () {
            // 切換選取效果：如果已選取就取消選取，反之則加入選取效果
            this.classList.toggle('selected');
            // 訂閱按鈕效果
        });
    });


    // 分享歌曲按鈕之彈跳視窗
    function deletelist() {
        document.getElementById('shareoverlay').style.display = 'flex';
    }
    function shareclosePopup() {
        document.getElementById('shareoverlay').style.display = 'none';
    }

    // 加入歌單按鈕之彈跳視窗
    function addopenPopup() {
        document.getElementById("addoverlay").style.display = "block";
        document.getElementById("addpopup").style.display = "block";
        // 加入淡入效果
        setTimeout(() => {
            document.getElementById("addoverlay").style.opacity = "1";
            document.getElementById("addpopup").style.opacity = "1";
            document.getElementById("addpopup").style.top = "30%";
        }, 10);
    }

    function addclosePopup() {
        // 淡出效果
        document.getElementById("addoverlay").style.opacity = "0";
        document.getElementById("addpopup").style.opacity = "0";
        document.getElementById("addpopup").style.top = "20%";

        // 延遲隱藏（等待動畫完成）
        setTimeout(() => {
            document.getElementById("addoverlay").style.display = "none";
            document.getElementById("addpopup").style.display = "none";
        }, 300);
    }

    // 頭貼預覽
        document.getElementById("headfileInput").addEventListener("change", function(event) {
            const file = event.target.files[0];
            const fileNameDisplay = document.getElementById("headfileName");

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById("headpreview");
                    img.src = e.target.result;
                    img.style.display = "block";
                };
                reader.readAsDataURL(file);

                // 更新檔名顯示
                fileNameDisplay.textContent = file.name;
            } else {
                fileNameDisplay.textContent = "未選擇圖片";
            }
        });

        // 封面預覽
        document.getElementById("coverfileInput").addEventListener("change", function(event) {
            const file = event.target.files[0];
            const fileNameDisplay = document.getElementById("coverfileName");

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById("coverpreview");
                    img.src = e.target.result;
                    img.style.display = "block";
                };
                reader.readAsDataURL(file);

                // 更新檔名顯示
                fileNameDisplay.textContent = file.name;
            } else {
                fileNameDisplay.textContent = "未選擇圖片";
            }
        });
</script>



