
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@

	<link rel="stylesheet" href="~/HotRank.cshtml.css" asp-append-version="true" />


	<button class="btn btn-outline-secondary add" onclick="addopenPopup()"><i class="bi bi-plus-lg"></i></button>
	<button class="btn btn-outline-secondary share" onclick="shareshowPopup()"><i class="bi bi-share"></i></button>
	<button class="btn btn-outline-secondary heart"><i class="bi bi-heart-fill"></i></i> 684</button>
	<button class="btn btn-outline-secondary play" onclick="playSong(1)"><i class="bi bi-play"></i></button>

							<!-- 加入歌單彈跳視窗 -->
	<div class="addoverlay" id="addoverlay" onclick="addclosePopup()"></div>

	<!-- 彈跳視窗 -->
	<div class="addpopup" id="addpopup">
		<h2>加入歌單</h2>
		<input type="text" class="addsearch-box" placeholder="搜尋歌單">

		<!-- 歌單列表 -->
		<div class="addplaylist-item">
			<div class="addplaylist-info">
				<img src="/image/p2.jpeg" alt="封面">
				<div>
					<div class="addplaylist-name">tt</div>
					<div class="addplaylist-song">1 首歌曲: ilyynlvl</div>
				</div>
			</div>
			<button class="addbtn-add" onclick="addtoggleSelection(this)">+ 加入歌單</button>
		</div>

		<!-- 底部按鈕 -->
		<div class="addpopup-footer">
			<button class="addbtn-newPlaylist">+ 新增歌單</button>
			<button class="btn addbtn-cancel" onclick="addclosePopup()">取消</button>
			<button class="btn addbtn-confirm" onclick="addclosePopup()">確定</button>
		</div>
	</div>

	<!-- 分享按鈕彈跳視窗 -->
	<div class="shareoverlay" id="shareoverlay">
		<div class="sharepopup">
			<div class="sharepopup-header">
				<span>分享歌曲</span>
				<span class="shareclose-btn" onclick="shareclosePopup()">&times;</span>
			</div>
			<div class="sharepopup-content">
				<img src="/image/p1.jpg" alt="封面">
				<div>
					<strong>打不通的電話 <b>Demo</b></strong>
					<div>Sean Ko 高翔</div>
				</div>
			</div>
			<div class="sharepopup-footer">
				<button class="btn fb btn-lg" ><i class="bi bi-facebook"></i></button>
				<button class="btn ig btn-lg" ><i class="bi bi-instagram"></i></i></button>
				<input type="text" value="https://streetvoice.com/seanko/songs/800" readonly>
				<button class ="copy" onclick="sharecopyLink()">複製</button>
			</div>
		</div>
	</div>

	<script>
// 取得所有按鈕
const buttons = document.querySelectorAll('.btn-outline-secondary.heart');

// 為每個按鈕加上點擊事件
buttons.forEach(button => {
	button.addEventListener('click', function () {
		// 切換選取效果：如果已選取就取消選取，反之則加入選取效果
		this.classList.toggle('selected');
	});
});

// 分享歌曲按鈕之彈跳視窗
function shareshowPopup() {
  document.getElementById('shareoverlay').style.display = 'flex';
}
function shareclosePopup() {
  document.getElementById('shareoverlay').style.display = 'none';
}
function sharecopyLink() {
  const input = document.querySelector('.sharepopup-footer input');
  input.select();
  document.execCommand('copy');
  alert('連結已複製');
}

// 加入歌單按鈕之彈跳視窗
function addopenPopup() {
  document.getElementById("addoverlay").style.display = "block";
  document.getElementById("addpopup").style.display = "block";
	// 加入淡入效果
	setTimeout(() => {
	  document.getElementById("addoverlay").style.opacity = "1";
	  document.getElementById("addpopup").style.opacity = "1";
	  document.getElementById("addpopup").style.top = "30%";
  }, 10);
}

function addclosePopup() {
 // 淡出效果
 document.getElementById("addoverlay").style.opacity = "0";
 document.getElementById("addpopup").style.opacity = "0";
 document.getElementById("addpopup").style.top = "20%";

 // 延遲隱藏（等待動畫完成）
 setTimeout(() => {
	 document.getElementById("addoverlay").style.display = "none";
	 document.getElementById("addpopup").style.display = "none";
 }, 300);
}

function addtoggleSelection(button) {
  if (button.classList.contains("selected")) {
	  button.classList.remove("selected");
	  button.textContent = "+ 加入歌單";
  } else {
	  button.classList.add("selected");
	  button.textContent = "✔ 已選擇";
  }
}
</script>